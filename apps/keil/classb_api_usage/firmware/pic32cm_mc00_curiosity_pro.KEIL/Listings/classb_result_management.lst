


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             Classb_TestResult, CODE, READON
LY
    2 00000000                 THUMB
    3 00000000         ; /* CLASSB_TEST_STATUS CLASSB_GetTestResult(CLASSB_TEST
                       _TYPE test_type,
    4 00000000         ;       CLASSB_TEST_ID test_id) */
    5 00000000                 EXPORT           CLASSB_GetTestResult
    6 00000000         
    7 00000000         ; /* void CLASSB_ClearTestResults(CLASSB_TEST_TYPE test_
                       type) */
    8 00000000                 EXPORT           CLASSB_ClearTestResults
    9 00000000         
   10 00000000         ; /* void _CLASSB_UpdateTestResult(CLASSB_TEST_TYPE test
                       _type,
   11 00000000         ;       CLASSB_TEST_ID test_id, CLASSB_TEST_STATUS value
                       ) */
   12 00000000                 EXPORT           _CLASSB_UpdateTestResult
   13 00000000         
   14 00000000         ; /* SRAM address for SST results */
   15 00000000 20000000 
                       SST_RES_ADDRESS
                               EQU              0x20000000
   16 00000000         ; /* SRAM address for RST results */
   17 00000000 20000004 
                       RST_RES_ADDRESS
                               EQU              0x20000004
   18 00000000         ; /* Result mask is 0x03 (2-bit results) */
   19 00000000 00000003 
                       RESULT_BIT_MASK
                               EQU              0x03
   20 00000000         ; /* CLASSB_TEST_STATUS */
   21 00000000 00000000 
                       CLASSB_TEST_NOT_EXECUTED
                               EQU              0x0
   22 00000000         
   23 00000000         ; /* Load to clear*/
   24 00000000 00000000 
                       REG_CLEAR_VAL
                               EQU              0x00000000
   25 00000000         
   26 00000000         CLASSB_GetTestResult
   27 00000000         ; /* Input arguments are test_type and test_id */
   28 00000000         ; /* test_type in r0, test_id in r1 */
   29 00000000         ; /* push used registers */
   30 00000000 B4F0            push             {r4-r7}
   31 00000002 4C18            ldr              r4, =SST_RES_ADDRESS
   32 00000004 2800            cmp              r0, #0
   33 00000006 D000            beq              GetResTestTypeSST
   34 00000008 4C17            ldr              r4, =RST_RES_ADDRESS
   35 0000000A         GetResTestTypeSST
   36 0000000A 4E18            ldr              r6, =RESULT_BIT_MASK
   37 0000000C         ; /* Load test result into r5 */
   38 0000000C 8825            ldrh             r5, [r4]
   39 0000000E         ; /* Extract the test result and return via r0 */
   40 0000000E 4628            mov              r0, r5
   41 00000010 41C8            rors             r0, r0, r1
   42 00000012 4030            ands             r0, r0, r6
   43 00000014         ; /* Load 1s complement result into r7 */
   44 00000014 8927            ldrh             r7, [r4, #8]



ARM Macro Assembler    Page 2 


   45 00000016         ; /* Check whether the read results are 1s complements *
                       /
   46 00000016 407D            eors             r5, r7, r5
   47 00000018 410D            asrs             r5, r1
   48 0000001A 4035            ands             r5, r5, r6
   49 0000001C 2D03            cmp              r5, #3
   50 0000001E D000            beq              TestResultValid
   51 00000020         ; /* Result mismatch. Return CLASSB_TEST_NOT_EXECUTED */
                       
   52 00000020 4813            ldr              r0, =CLASSB_TEST_NOT_EXECUTED
   53 00000022         TestResultValid
   54 00000022 BCF0            pop              {r4-r7}
   55 00000024 4770            bx               r14
   56 00000026         
   57 00000026         _CLASSB_UpdateTestResult
   58 00000026         ; /* Input arguments are test_type, test_id and value */
                       
   59 00000026         ; /* test_type in r0, test_id in r1, value in r2 */
   60 00000026         ; /* push used registers */
   61 00000026 B4F0            push             {r4-r7}
   62 00000028 4C0E            ldr              r4, =SST_RES_ADDRESS
   63 0000002A 2800            cmp              r0, #0
   64 0000002C D000            beq              UpdateResTestTypeSST
   65 0000002E 4C0E            ldr              r4, =RST_RES_ADDRESS
   66 00000030         UpdateResTestTypeSST
   67 00000030         ;/* read the existing result */
   68 00000030 8825            ldrh             r5, [r4]
   69 00000032 4E0E            ldr              r6, =RESULT_BIT_MASK
   70 00000034 408E            lsls             r6, r6, r1
   71 00000036 43F6            mvns             r6, r6
   72 00000038         ; /* Now r6 has ((~RESULT_BIT_MASK) << test_id) */
   73 00000038 4035            ands             r5, r5, r6
   74 0000003A 4617            mov              r7, r2
   75 0000003C 408F            lsls             r7, r7, r1
   76 0000003E 433D            orrs             r5, r5, r7
   77 00000040 8025            strh             r5, [r4]
   78 00000042         ; /* Load the 1s complement of the result */
   79 00000042         ; /* For SSTs, this address is 0x20000008 */
   80 00000042         ; /* For RSTs, this address is 0x2000000c */
   81 00000042         ; /* Take 1s complement of the value */
   82 00000042 43EA            mvns             r2, r5
   83 00000044 8122            strh             r2, [r4, #8]
   84 00000046         
   85 00000046 BCF0            pop              {r4-r7}
   86 00000048 4770            bx               r14
   87 0000004A         
   88 0000004A         CLASSB_ClearTestResults
   89 0000004A         ; /* Input arguments are test_type and test_id */
   90 0000004A         ; /* test_type in r0 */
   91 0000004A         ; /* push used registers */
   92 0000004A B4F0            push             {r4-r7}
   93 0000004C 4C05            ldr              r4, =SST_RES_ADDRESS
   94 0000004E 2800            cmp              r0, #0
   95 00000050 D000            beq              ClearResTestTypeSST
   96 00000052 4C05            ldr              r4, =RST_RES_ADDRESS
   97 00000054         ClearResTestTypeSST
   98 00000054 4D06            ldr              r5, =REG_CLEAR_VAL
   99 00000056 8025            strh             r5, [r4]
  100 00000058         ; /* Store 1s complement of the result */



ARM Macro Assembler    Page 3 


  101 00000058 43ED            mvns             r5, r5
  102 0000005A         ; /* Add 4 to get the address of 1s complement result */
                       
  103 0000005A 3408            adds             r4, #8
  104 0000005C 8025            strh             r5, [r4]
  105 0000005E BCF0            pop              {r4-r7}
  106 00000060 4770            bx               r14
  107 00000062         
  108 00000062 00 00           ALIGN
  109 00000064         
  110 00000064                 END
              20000000 
              20000004 
              00000003 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M0+ --depend=.\o
bjects\classb_result_management.d -o.\objects\classb_result_management.o -IC:\K
eil_v5\ARM\PACK\Microchip\PIC32CM-MC_DFP\1.2.52\PIC32CM1216MC00048\include --pr
edefine="__UVISION_VERSION SETA 534" --predefine="__PIC32CM1216MC00048__ SETA 1
" --list=.\listings\classb_result_management.lst ..\src\config\pic32cm_mc00_cur
iosity_pro\classb\classb_result_management.S



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CLASSB_ClearTestResults 0000004A

Symbol: CLASSB_ClearTestResults
   Definitions
      At line 88 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 8 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb_
result_management.S
Comment: CLASSB_ClearTestResults used once
CLASSB_GetTestResult 00000000

Symbol: CLASSB_GetTestResult
   Definitions
      At line 26 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 5 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb_
result_management.S
Comment: CLASSB_GetTestResult used once
Classb_TestResult 00000000

Symbol: Classb_TestResult
   Definitions
      At line 1 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb_
result_management.S
   Uses
      None
Comment: Classb_TestResult unused
ClearResTestTypeSST 00000054

Symbol: ClearResTestTypeSST
   Definitions
      At line 97 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 95 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
Comment: ClearResTestTypeSST used once
GetResTestTypeSST 0000000A

Symbol: GetResTestTypeSST
   Definitions
      At line 35 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 33 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
Comment: GetResTestTypeSST used once
TestResultValid 00000022

Symbol: TestResultValid
   Definitions
      At line 53 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 50 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
Comment: TestResultValid used once



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

UpdateResTestTypeSST 00000030

Symbol: UpdateResTestTypeSST
   Definitions
      At line 66 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 64 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
Comment: UpdateResTestTypeSST used once
_CLASSB_UpdateTestResult 00000026

Symbol: _CLASSB_UpdateTestResult
   Definitions
      At line 57 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 12 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
Comment: _CLASSB_UpdateTestResult used once
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

CLASSB_TEST_NOT_EXECUTED 00000000

Symbol: CLASSB_TEST_NOT_EXECUTED
   Definitions
      At line 21 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 52 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
Comment: CLASSB_TEST_NOT_EXECUTED used once
REG_CLEAR_VAL 00000000

Symbol: REG_CLEAR_VAL
   Definitions
      At line 24 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 98 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
Comment: REG_CLEAR_VAL used once
RESULT_BIT_MASK 00000003

Symbol: RESULT_BIT_MASK
   Definitions
      At line 19 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 36 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
      At line 69 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S

RST_RES_ADDRESS 20000004

Symbol: RST_RES_ADDRESS
   Definitions
      At line 17 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 34 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
      At line 65 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
      At line 96 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S

SST_RES_ADDRESS 20000000

Symbol: SST_RES_ADDRESS
   Definitions
      At line 15 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
   Uses
      At line 31 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
      At line 62 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S
      At line 93 in file ..\src\config\pic32cm_mc00_curiosity_pro\classb\classb
_result_management.S



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols


5 symbols
347 symbols in table
